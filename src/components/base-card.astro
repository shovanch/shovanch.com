---
import { formatDate } from '~/utils/format-date';
import type { ContentType } from '~/config/site';

export type BaseCardProps = {
  title: string;
  href: string;
  publishedAt: string;
  body?: string;
  tags?: string[];
  renderOnClientRouter?: boolean;
  contentType?: ContentType;
  showExcerpt?: boolean;
  showType?: boolean;
  showDate?: boolean;
};

type Props = BaseCardProps;

const {
  title,
  href,
  publishedAt,
  tags,
  renderOnClientRouter = true,
  contentType = 'post',
  showDate = true,
} = Astro.props;

const linkProps = renderOnClientRouter ? {} : { 'data-astro-reload': '' };
const ariaLabel = `Read ${contentType}: ${title}`;
---

<li
  class="writing-item flex w-full flex-col text-lg md:text-xl"
  data-tags={tags?.join(',') || ''}
>
  <!-- Title row with date on right -->
  <div class="flex items-start justify-between gap-4">
    <a
      class="group relative block w-max border-none bg-transparent pl-0! font-serif text-lg font-semibold decoration-1 underline-offset-2 md:text-xl"
      href={href}
      {...linkProps}
      aria-label={ariaLabel}
      title={title}
    >
      {title}
    </a>
    {
      showDate && (
        <time
          datetime={publishedAt}
          class="text-theme-text-secondary shrink-0 font-sans text-base font-medium"
        >
          {formatDate(publishedAt)}
        </time>
      )
    }
  </div>
</li>
